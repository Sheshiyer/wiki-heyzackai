{%- comment -%}
Section: Product — Trust, Certifications & Testimonials
Purpose: Build trust with visible certifications, security notes, and parent quotes
{%- endcomment -%}

{{ 'zack-modules.css' | asset_url | stylesheet_tag }}

<section id="z-trust" class="z-section" data-section-id="{{ section.id }}">
  <div class="z-container">
    <h2>{{ section.settings.title | default: 'Trusted for Families' }}</h2>

    {%- if section.settings.show_badges -%}
      {% render 'zack-cert-badges', badges: section.settings.badges | split: ',' %}
    {%- endif -%}

    <div class="z-grid" style="margin-top:16px">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'security' -%}
            <article class="z-card" {{ block.shopify_attributes }}>
              <h3>{{ block.settings.heading | default: 'Security & Privacy' }}</h3>
              <ul class="z-list">
                {%- assign lines = block.settings.items | newline_to_br | split: '<br />' -%}
                {%- for line in lines -%}
                  {%- if line != '' -%}<li>{{ line }}</li>{%- endif -%}
                {%- endfor -%}
              </ul>
            </article>
          {%- when 'testimonial' -%}
            <article class="z-card" {{ block.shopify_attributes }}>
              <figure class="z-testimonial">
                <blockquote>“{{ block.settings.quote }}”</blockquote>
                <figcaption>— {{ block.settings.author }}</figcaption>
              </figure>
            </article>
        {%- endcase -%}
      {%- endfor -%}
    </div>

  </div>
</section>

{% schema %}
{
  "name": "Product — Trust & Certifications",
  "tag": "section",
  "class": "section",
  "settings": [
    {"type":"text","id":"title","label":"Section title","default":"Trusted for Families"},
    {"type":"checkbox","id":"show_badges","label":"Show certification badges","default":true},
    {"type":"text","id":"badges","label":"Badges (comma separated)","default":"CE,FCC,REACH,RoHS,COPPA,CPSIA"}
  ],
  "blocks": [
    {
      "type":"security",
      "name":"Security & Privacy list",
      "limit": 6,
      "settings": [
        {"type":"text","id":"heading","label":"Heading","default":"Security & Privacy"},
        {"type":"textarea","id":"items","label":"Items (one per line)"}
      ]
    },
    {
      "type":"testimonial",
      "name":"Parent testimonial",
      "limit": 6,
      "settings": [
        {"type":"text","id":"author","label":"Author","default":"Beta Parent"},
        {"type":"textarea","id":"quote","label":"Quote","default":"It’s the first tech toy I trust. Our child’s language confidence grew without more screen time."}
      ]
    }
  ],
  "presets": [
    {
      "name": "Product — Trust & Certifications",
      "category": "Product",
      "blocks": [
        {
          "type": "security",
          "settings": {
            "heading": "Security & Privacy",
            "items": "Privacy‑first design with local processing\nGDPR, COPPA, and CCPA aligned standards\nParental controls and monitoring\nAge‑appropriate, curated content\nVoice cloning requires verified parental consent\nNo data sharing with third parties"
          }
        },
        {"type":"testimonial","settings":{"author":"Parent, CA","quote":"Zack feels like a caring friend that helps with homework and bedtime stories—without another screen."}}
      ]
    }
  ]
}
{% endschema %}
